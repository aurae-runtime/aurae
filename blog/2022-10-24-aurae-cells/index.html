
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://aurae.io/blog/2022-10-24-aurae-cells/">
      
      
      
      
      <link rel="icon" href="../../assets/logo/aurae.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Workload Isolation with Aurae Cells - Aurae Runtime</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Terminus:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Terminus";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/aurae.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="white">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#workload-isolation-with-aurae-cells" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Aurae Runtime" class="md-header__button md-logo" aria-label="Aurae Runtime" data-md-component="logo">
      
  <img src="../../assets/logo/aurae-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Aurae Runtime
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Workload Isolation with Aurae Cells
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aurae-runtime/aurae" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Aurae Runtime" class="md-nav__button md-logo" aria-label="Aurae Runtime" data-md-component="logo">
      
  <img src="../../assets/logo/aurae-white.png" alt="logo">

    </a>
    Aurae Runtime
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aurae-runtime/aurae" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/auraed" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auraed
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AuraeScript
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            AuraeScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/auraescript" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/aurae-runtime/aurae/tree/main/examples" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples on GitHub
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Aurae Standard Library
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Aurae Standard Library
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/stdlib" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/stdlib/v0" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    V0
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/build" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building from Source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/quickstart" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/development-environments" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Environments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/signals" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Signals
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/certs" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Certificates
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/community" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aurae Community
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://discord.gg/aTe2Rjg5rq" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Join our Discord
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/auraed" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auraed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/auraescript" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auraescript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/client" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/aer" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_5" >
        
          
          <label class="md-nav__link" for="__nav_9_5" id="__nav_9_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    src
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_5">
            <span class="md-nav__icon md-icon"></span>
            src
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/src/auraed/lib.rs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auraed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/src/auraescript/lib.rs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    auraescript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/src/client/lib.rs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/crate/src/aer/lib.rs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/blog/2022-10-24-aurae-cells" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Isolation with Aurae Cells
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="/blog/2022-12-11-cgroups" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cgroups in Aurae
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#runtime-subsystem" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime Subsystem
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="workload-isolation-with-aurae-cells">Workload Isolation with Aurae Cells</h1>
<h2 id="runtime-subsystem">Runtime Subsystem</h2>
<p>Last week we merged <a href="https://github.com/aurae-runtime/aurae/pull/73">Pull Request #73</a> which marks the project's formal acceptance of our initial runtime <a href="https://aurae.io/stdlib/#what-is-a-subsystem">subsystem</a> API.</p>
<div class="highlight"><pre><span></span><code><span class="kd">service</span><span class="w"> </span><span class="n">Runtime</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunExecutable</span><span class="p">(</span><span class="n">Executable</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">ExecutableStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunCell</span><span class="p">(</span><span class="n">Cell</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CellStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunVirtualMachine</span><span class="p">(</span><span class="n">VirtualMachine</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">VirtualMachineStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">Spawn</span><span class="p">(</span><span class="n">Instance</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">InstanceStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunPod</span><span class="p">(</span><span class="n">Pod</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">PodStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="p">}</span>
</code></pre></div>
<p>The runtime subsystem is the most fundamental API for Aurae. The API is synchronous, and is intended to serve as the lowest level building block for future subsystems in the project.</p>
<p>The API introduces 5 workloads types of runtime isolation primitives, as well as a special function known as <code>Spawn()</code>. </p>
<p>The 5 workload types:</p>
<ul>
<li>Executable</li>
<li>Cell</li>
<li>VirtualMachine</li>
<li>Instance</li>
<li>Pod</li>
</ul>
<p>Thank you to the many authors, contributors, and maintainers who helped the project form conviction on the initial API: </p>
<p><a href="https://github.com/dominichamon">Dominic Hamon</a>    | <a href="https://github.com/future-highway">@future-highway</a>  | <a href="https://github.com/hazelweakly">Hazel Weakly</a>    | <a href="https://github.com/j0shgrant">Josh Grant</a>    | <a href="https://github.com/MalteJ">Malte Janduda</a>    | <a href="https://github.com/taniwha3">@taniwha3</a>  | <a href="https://github.com/Vincinator">Vincent Riesop</a>   |</p>
<h1 id="keeping-pods-intuitive">Keeping Pods Intuitive</h1>
<p>We make the assumption that most Aurae consumers will be interested in "scheduling pods", as this is the primary unit of work for Kubernetes.</p>
<p>Therefore, we knew we wanted to make Pods look and feel as much like Kubernetes as possible, so they would be intuitive for users. 
From a client perspective an Aurae pod should look, feel, and behave just like an OCI compliant Kubernetes pod with only a few small differences.</p>
<p>Aurae pods will run with an extra layer of isolation. This isolation is based on virtualization (when applicable) and resembles <a href="https://github.com/kata-containers/kata-containers/tree/main/docs/design/architecture#container-creation">how Kata containers are created</a> or <a href="https://github.com/firecracker-microvm/firecracker/blob/main/docs/jailer.md#the-firecracker-jailer">how firecracker creates a jailed isolation zone</a>.</p>
<p>How Aurae manages and builds this isolation zone for pods is what has influenced the runtime API that you see above.</p>
<h2 id="back-to-the-basics-cgroups-and-namespaces">Back to the Basics: cgroups and namespaces</h2>
<p>In order to understand the 5 workload types we need a small lesson in cgroups and namespaces.</p>
<h3 id="control-groups-cgroups">Control Groups (cgroups)</h3>
<p>A <a href="https://man7.org/linux/man-pages/man7/cgroups.7.html">control group</a> or "cgroup" for short is a way of "slicing" a part of a Linux system into smaller units which can be used for whatever you want. For example, you can cordon off 10% of your systems compute and memory resources with a cgroup, and run any process you want inside it. If your workload eats up more than 10% of the allocated resources, the kernel will terminate it. This cgroup behavior is likely the root cause of many of the <code>OOMKilled</code> and CPU throttling errors you see in Kubernetes today.</p>
<p>Notably there are <a href="https://man7.org/linux/man-pages/man7/cgroups.7.html">2 types of cgroup implementation</a>: v1 and v2. Aurae will use the v2 standard by default.</p>
<h3 id="namespaces">Namespaces</h3>
<p>A <a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">namespace</a> is a way of sharing or isolating specific parts of a Linux system with a process. If all namespaces are shared a process is as close as possible to the "host" it runs on. If no namespaces are shared a process is as isolated as possible from the "host" it runs on. Exposing namespaces is usually how container escapes are performed, and how lower level networking and storage is managed with Kubernetes.</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>root@alice<span class="o">]</span>:<span class="w"> </span>ls<span class="w"> </span>/proc/1/ns
cgroup<span class="w">  </span>ipc<span class="w">  </span>mnt<span class="w">  </span>net<span class="w">  </span>pid<span class="w">  </span>pid_for_children<span class="w">  </span><span class="nb">time</span><span class="w">  </span>time_for_children<span class="w">  </span>user<span class="w">  </span>uts
</code></pre></div>
<h3 id="containers">Containers</h3>
<p>I often say that cgroups are "vertical" resource slices and namespaces are "horizontal" access controls. When a cgroup is run in its own namespaces it's both a slice of resources, and an isolation boundary as well. We call this intersection a "container".</p>
<h2 id="systemd-slices">Systemd Slices</h2>
<p>By default, systemd schedules all of its workloads in their own cgroup with access to the same namespaces as PID 1 on the system. These workloads are called <a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">services</a> or units.</p>
<p>Interestingly enough, Kubernetes also leverages systemd slices. You can usually see both systemd slices (<code>system.slice</code>) and Kubernetes pods (<code>kubepods.slice</code>) running side-by-side by exploring <a href="https://man7.org/linux/man-pages/man5/sysfs.5.html">/sys</a> or <code>sysfs(5)</code> on your system. There are usually other cgroups running there as well. </p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>root@alice<span class="o">]</span>:<span class="w"> </span>/sys/fs/cgroup&gt;#<span class="w"> </span>ls<span class="w"> </span>-d<span class="w"> </span>*/
dev-hugepages.mount//<span class="w">  </span>kubepods.slice//<span class="w">                 </span>sys-kernel-config.mount//<span class="w">   </span>system.slice//
dev-mqueue.mount//<span class="w">     </span>pids//<span class="w">                           </span>sys-kernel-debug.mount//<span class="w">    </span>user.slice//
init.scope//<span class="w">           </span>sys-fs-fuse-connections.mount//<span class="w">  </span>sys-kernel-tracing.mount//
</code></pre></div>
<h2 id="simplifying-the-stack">Simplifying the Stack</h2>
<p>We know we wanted to simplify how workloads are managed at scale. We believe that standardizing process management and cgroup management is a way to simplify runtime complexity, as well as offer a means to an ends with <a href="https://en.wikipedia.org/wiki/Cloud_computing_issues#Performance_interference_and_noisy_neighbors">the noisy neighbor problem</a> in multi tenant systems.</p>
<p>Therefore, we knew we wanted Aurae to offer functionality that would allow it to manage cgroups well for a plethora of runtime use cases and not just containers.</p>
<p>In Kubernetes a user needs to understand the nuance of cgroup implementation detail, systemd scheduling semantics, systemd cgroup drivers, 1 of many container runtimes, CNI, CSI, and more in order to cordon off and network a section of their system.</p>
<p>With Aurae a user only needs awareness of a single binary which will safely do all of the above in a secure way by default.</p>
<h2 id="introducing-aurae-cells">Introducing Aurae Cells</h2>
<p>An Aurae Cell is just a group of processes running in a unique cgroup with explicit deny-by-default access to host namespaces.</p>
<p>Additionally, the processes running in a cell will share namespaces, which mirrors how Kubernetes runs containers in a pod. This implies that processes will be able to communicate over the Linux loopback interface (localhost), and share storage between them.</p>
<p>These processes can be grouped together and executed beside each other.
Most users will recognize this pattern as the pattern that has enabled <a href="https://www.oreilly.com/library/view/designing-distributed-systems/9781491983638/ch02.html">the sidecar pattern</a>.</p>
<p><img alt="cell" src="/assets/img/blog-cell.png" /></p>
<p>Because Aurae intends to manage every process on a system, Aurae will be able to make trustworthy guarantees and offer expressive controls over how a host is broken into cells.</p>
<p><img alt="cells" src="/assets/img/blog-cells.png" /></p>
<h3 id="executables">Executables</h3>
<p>Aurae will be able to execute regular old shell processes in a cell. We call these each of these basic processes an <code>Executable</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunExecutable</span><span class="p">(</span><span class="n">Executable</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">ExecutableStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<h3 id="container-cells">Container Cells</h3>
<p>Additionally, Aurae will be able to execute OCI compliant container images in a cell which we just call a <code>Cell</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunCell</span><span class="p">(</span><span class="n">Cell</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">CellStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>Regardless of if an administrator is executing a basic process, or a container: Aurae will manage the underlying cgroup and namespace implementation.</p>
<h2 id="introducing-virtualization">Introducing Virtualization</h2>
<p>Taking a step back from containerization we also understand that many enterprise users will need to execute untrusted code at scale.
Aurae additionally acts as a lightweight virtualization hypervisor and meta-data service in addition to being a cgroup broker.</p>
<p>Each instance of Aurae comes with its own running PID 1 daemon called <code>auraed</code>.</p>
<p><img alt="cells" src="/assets/img/blog-instance.png" /></p>
<h3 id="understanding-virtualization">Understanding Virtualization</h3>
<p>Virtualization is a more secure level of isolation that operates closer to the hardware. The boundary between a host and a guest virtualized workload is layer 3 of networking, and block patterns in storage. This more abstract interface creates a much more resilient environment for executing a workload.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunVirtualMachine</span><span class="p">(</span><span class="n">VirtualMachine</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">VirtualMachineStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<h3 id="microvms-with-aurae">MicroVMs with Aurae</h3>
<p>Aurae brings the short-lived, destroy on exit (MicroVM) paradigm into scope by embedding the <a href="https://github.com/firecracker-microvm/firecracker">firecracker</a> Rust crates directly and scheduling workloads with the <a href="https://www.linux-kvm.org/page/Main_Page">KVM</a> or Kernel-based Virtual Machine.</p>
<p>Aurae is able to <code>Spawn()</code> a new <code>Instance</code> of itself into a newly created MicroVM which can be used arbitrarily.</p>
<h3 id="aurae-spawn">Aurae Spawn</h3>
<p>The name <code>Spawn()</code> is taken from the Rust <code>std::process</code> crate and resembles a pattern what most Linux users will know as <code>unshare(2)</code> or namespace delegation. Basically a spawned instance of Aurae will inherit certain properties from the parent, and will come with a few basic guarantees with regard to security and connectivity.</p>
<p>Aurae is designed to be recursive, which enables nested isolation zones and gives the project the basic building blocks it needs to hold an opinion on how users should run workloads.</p>
<p>Spawned Aurae instances will receive a bridged TAP network device which a nested <code>auraed</code> daemon will listen on by default. This allows a parent Aurae instance running with an independent kernel to communicate directly with a child instance over the same mTLS authenticated gRPC API the rest of the project leverages.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">Spawn</span><span class="p">(</span><span class="n">Instance</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">InstanceStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>Aurae will manage creating an ephemeral <a href="https://github.com/spiffe/spiffe">SPIFFE</a> service identity for each spawned instance and will delegate down kernel images, <code>initramfs</code>, and even the <code>auraed</code> daemon itself.</p>
<p>Aurae manages the <code>Spawn()</code> including the networking bridge, and service identity management transparently at runtime.</p>
<p><img alt="cells" src="/assets/img/blog-spawn.png" /></p>
<p><strong>Note</strong>: In the case that virtualization is not available on the host (e.g. nested virtualization in the cloud), Aurae will spawn directly into an isolated Cell.</p>
<h3 id="virtual-machines-with-aurae">Virtual Machines with Aurae</h3>
<p>Because Aurae will have the capability to <code>Spawn()</code> itself using the KVM, it is also possible to expose raw virtual machine functionality for users who wish to leverage Aurae as a long-lived hypervisor as well. Because Aurae maintains its own concept of system state as well as all of the cells on a system it is possible to break up a single host in many ways, with many isolation possibilities. </p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunVirtualMachine</span><span class="p">(</span><span class="n">VirtualMachine</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">VirtualMachineStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<h2 id="pods">Pods</h2>
<p>Finally, we have the vocabulary needed to explain how an Aurae pod is unique.</p>
<p>An Aurae pod is a <code>Cell</code> running in a spawned Aurae <code>Instance</code>. </p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">rpc</span><span class="w"> </span><span class="n">RunPod</span><span class="p">(</span><span class="n">Pod</span><span class="p">)</span><span class="w"> </span><span class="k">returns</span><span class="w"> </span><span class="p">(</span><span class="n">PodStatus</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div>
<p>First Aurae will spawn a new instance of itself. Next Aurae will bridge to the spawned instance, and establish connectivity as a client to the new instance. The parent will then run a cell in the newly spawned Aurae instance.</p>
<p>Because Aurae is acts as a hypervisor this gives an operator the ability to mount network devices directly into the spawned instance, which can be referenced from the nested cell.</p>
<p>We believe this pattern to be a more flexible, secure, and efficient pattern which can be leveraged in place of traditional sidecar style mesh networking that is often seen with service mesh projects such as <a href="https://github.com/istio/istio">Istio</a>. </p>
<p>From the original client's perspective scheduling a pod will feel natural, and will still expose basic fields such as OCI image, listen port, etc. Users can run a pod with Aurae, and the extra isolation layer should be transparent and free just by executing the <code>RunPod</code> gRPC function.</p>
<p><strong>Note</strong>: The project has decided not to support the Kubernetes Pod API directly at this layer of the stack.</p>
<h2 id="whats-next">What's Next?</h2>
<p>The project is under active development, and many of the features described in this blog are currently a work in progress.</p>
<p>If you are interested in helping us work on these features please feel welcome to <a href="https://discord.gg/aTe2Rjg5rq">join the discord</a> where we discuss our progress.</p>
<p>If you are interested in contributing please see the <a href="https://aurae.io/community/#getting-involved">getting involved</a> documentation.</p>
<p>If you are interested in finding areas to contribute please see our <a href="https://github.com/aurae-runtime/aurae/issues?q=is%3Aopen+is%3Aissue+label%3A%22Good+First+Issue%22">good first issues</a> which are designed to be easy for a newcomer to pick up and get started with. </p>
<p>f you are interested in discussing product opportunities, or venture funding we unfortunately are not taking these discussions at this time. Our intention is to keep Aurae free and community driven.</p>
<hr />
<p><em>Author: <a href="https://github.com/krisnova">Kris Nóva</a></em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022-2023 The Aurae Runtime Project
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="mailto:<info@aurae.io>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>